var aBF=[];function aSj(aZL,aQL){function ZY(dn){var YN=false;var Vh=dn.thumbsize;for(var x=0;x<aBF.length;x++){var fO=aBF[x];if(fO==dn.quickkey+"-"+Vh){YN=true;}}if(!YN)aBF.push(dn.quickkey+"-"+Vh);return YN;};function aRe(ayM,aAI){for(var x=0;x<aBF.length;x++){var fO=aBF[x];if(fO==ayM+"-"+aAI){aBF.splice(x,1);}}};function aBC(aZL){var Vh=aZL.thumbsize,xhReq=new XMLHttpRequest();xhReq.onreadystatechange=function(){if(xhReq.readyState==4){var serverResponse=JSON.parse(xhReq.response);postMessage({cmd:'script-error',message:serverResponse});if(serverResponse.page_status=="COMPLETE"){aRe(aZL.quickkey,Vh);postMessage({cmd:'update-file',status:2,thumbsize:Vh,quickkey:aZL.quickkey});}else if(serverResponse.document_status=="ERROR"||serverResponse.page_status=="ERROR"){aRe(aZL.quickkey,Vh);postMessage({cmd:'update-file',status:32768,thumbsize:Vh,quickkey:aZL.quickkey});}else{postMessage({cmd:'script-error',message:'recheck'});aBk(aZL,true);}}};xhReq.open("http://cdn.mediafire.com/js/POST",aZL.url,false);xhReq.send();};function aBk(aZL){if(typeof aZL.docCheckCount=="undefined")aZL.docCheckCount=0;else aZL.docCheckCount++;if(aZL.docCheckCount<aZL.maxchecks){setTimeout(function(){aSj(aZL,true);},3000);}else{postMessage({cmd:'update-file',status:32768,thumbsize:aZL.thumbsize});}};aBC(aZL);};onmessage=function(event){switch(event.data.cmd){case 'check-status':aSj(event.data.file);break;}};